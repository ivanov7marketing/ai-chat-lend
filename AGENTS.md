# AGENTS.md — правила для агента (Antigravity)

## Цель проекта
ai-chat-lend — AI чат-лендинг для расчёта сметы ремонта квартиры, чат-воронка → расчёт → PDF-смета (позже) → лид. Бэкенд: Node.js + Fastify. [file:1][file:2]

## Источники истины
- DESIGN.md — дизайн-система (UI обязан соответствовать).
- GEMINI.md — правила генерации кода/структуры (обязательны к соблюдению).
- План реализации.md / Концепция — функциональные требования и модули. [file:1][file:2]

## Жёсткие запреты
- Никакого hardcode бизнес-данных (цены, нормы, тексты сметы) в коде; только конфиги/БД/ENV.
- Никаких inline styles и "случайных" hex-цветов в компонентах; только Tailwind + токены.
- Не переопределять стандартный Tailwind `gray`; добавлять только кастомные токены (primary/secondary/etc.).
- Не добавлять новые зависимости без явной причины и согласования.

## Правила UI
- Только светлая тема.
- Компоненты: pill-кнопки, мягкие тени, щедрые отступы, rounded-2xl карточки, rounded-xl инпуты (см. DESIGN.md).
- Иконки: Lucide React, stroke 1.5–2px.

## Правила backend
- Fastify (не Express).
- В MVP воронка — скриптовая/state-machine, LLM подключается только для свободных вопросов. [file:1][file:2]
- Хранить секреты только в `.env`, никогда не коммитить ключи.

## Структура проекта (по умолчанию)
- `frontend/` — React + Vite
- `backend/` — Fastify API
- `shared/` — общие типы/валидации (если нужно)

## Git/деплой
- Среда выполнения: Windows PowerShell.
- **Cwd — ВСЕГДА корень проекта с ЗАГЛАВНОЙ буквой диска (CRITICAL)**:
  - `run_command` → `Cwd` = `C:\dev\ai-chat-lend` (обязательно большая `C`).
  - **Никогда** не ставить `Cwd` в подпапку или использовать маленькую букву диска (`c:\`) — команды будут молча отменены (баг Antigravity).
  - Для запуска в подпапке: `Set-Location frontend; npm run build`
  - Разделитель команд: `;` (НЕ `&&` — PowerShell не поддерживает).
  - Подробный workflow: `.agents/workflows/run-commands.md`
- После завершения задачи всегда делай коммит и пуш.
- После git push деплой на сервер происходит автоматически через GitHub Actions.
- Не запускать docker compose на сервере вручную.
- Коммит-сообщения: feat: / fix: / chore: / docs:

## Проверки перед PR/пушем
- Линтер/format (если подключены) без ошибок.
- Проект собирается (`npm run build`) хотя бы на уровне соответствующего пакета.
